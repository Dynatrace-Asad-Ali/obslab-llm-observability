{"version":14,"variables":[],"tiles":{"0":{"type":"markdown","title":"","content":"![weaviate logo](https://weaviate.io/assets/images/weaviate-nav-logo-light-532fdca50b4e5f974111eaf70c36080c.svg)\n# Weaviate LSM Store"},"1":{"type":"markdown","title":"","content":"TODO: LSM Strategy Replace by Level (Object Storage)\n\nLine 84 of: `https://github.com/weaviate/weaviate/blob/main/tools/dev/grafana/dashboards/lsm.json`\n\n```\nsum by (level, unit) (lsm_segment_size{strategy=\\\"replace\\\"})\n```"},"2":{"type":"markdown","title":"","content":"TODO: LSM Strategy SetCollection by Level (Inverted without frequency)\n\nLine 147 of: `https://github.com/weaviate/weaviate/blob/main/tools/dev/grafana/dashboards/lsm.json`\n\n```\nsum by (level, unit) (lsm_segment_size{strategy=\\\"setcollection\\\"})\n```"},"3":{"type":"markdown","title":"","content":"TODO: LSM Strategy MapCollection by Level (Inverted with frequency)\n\nLine 210 of: `https://github.com/weaviate/weaviate/blob/main/tools/dev/grafana/dashboards/lsm.json`\n\n```\nsum by (level, unit) (lsm_segment_size{strategy=\\\"mapcollection\\\"})\n```"},"4":{"type":"data","title":"Memtable Size (Individual)","query":"timeseries interval: 1h, lsm_memtable_size=avg(lsm_memtable_size)","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"lsm_memtable_size","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":true},"leftYAxisSettings":{"label":""},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["lsm_memtable_size"],"leftAxisDimensions":[]},"hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"5":{"type":"markdown","title":"","content":"TODO: Memtable Operations (individual)\n\nLine 389 of: `https://github.com/weaviate/weaviate/blob/main/tools/dev/grafana/dashboards/lsm.json`\n\n```\nrate(lsm_memtable_durations_ms_sum{}[$__interval])/rate(lsm_memtable_durations_ms_count{}[$__interval])\n```"},"6":{"type":"markdown","title":"","content":"TODO: Bloom Filter Hits and Misses Duration\n\nLine 479 of: `https://github.com/weaviate/weaviate/blob/main/tools/dev/grafana/dashboards/lsm.json`\n\n```\nrate(lsm_bloom_filters_duration_ms_sum{strategy=\\\"replace\\\"}[$__interval])/rate(lsm_bloom_filters_duration_ms_count{strategy=\\\"replace\\\"}[$__interval])\n```"},"7":{"type":"markdown","title":"","content":"TODO: Bloom Filter False Positive Ratio\n\nLine 543 of: `https://github.com/weaviate/weaviate/blob/main/tools/dev/grafana/dashboards/lsm.json`\n\n```\nsum(lsm_bloom_filters_duration_ms_count{operation=\\\"get_false_positive\\\"})/(sum(lsm_bloom_filters_duration_ms_count{operation=\\\"get_true_negative\\\"})+sum(lsm_bloom_filters_duration_ms_count{operation=\\\"get_true_positive\\\"})+sum(lsm_bloom_filters_duration_ms_count{operation=\\\"get_false_positive\\\"}))\n```"},"8":{"type":"data","title":"True Positives","query":"timeseries lsm_bloom_filters_duration_ms_sum=sum(lsm_bloom_filters_duration_ms_sum), filter: { operation==\"get_true_positive\" }","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"lsm_bloom_filters_duration_ms_sum","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":true},"leftYAxisSettings":{"label":""},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["lsm_bloom_filters_duration_ms_sum"],"leftAxisDimensions":[]},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"9":{"type":"data","title":"True Negatives","query":"timeseries lsm_bloom_filters_duration_ms_sum=sum(lsm_bloom_filters_duration_ms_sum), filter: { operation==\"get_true_negative\" }","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"lsm_bloom_filters_duration_ms_sum","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":true},"leftYAxisSettings":{"label":""},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["lsm_bloom_filters_duration_ms_sum"],"leftAxisDimensions":[]},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"10":{"type":"markdown","title":"","content":"## Bloom Filter Access"},"11":{"type":"data","title":"False Positives","query":"timeseries lsm_bloom_filters_duration_ms_sum=sum(lsm_bloom_filters_duration_ms_sum), filter: { operation==\"get_false_positive\" }","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"lsm_bloom_filters_duration_ms_sum","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":true},"leftYAxisSettings":{"label":""},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["lsm_bloom_filters_duration_ms_sum"],"leftAxisDimensions":[]},"categoricalBarChartSettings":{}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"histogram":{"dataMappings":[]},"honeycomb":{"shape":"square"}}},"12":{"type":"data","title":"Object Storage","query":"timeseries interval: 1h, lsm_segment_size=sum(lsm_segment_size), filter: { strategy==\"replace\" }","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"lineChart","visualizationSettings":{"thresholds":[{"id":"0","title":"","field":"lsm_segment_size","rules":[{"id":"0","label":"","comparator":"≥","color":"#7dc540"},{"id":"1","label":"","comparator":"≥","color":"#f5d30f"},{"id":"2","label":"","comparator":"≥","color":"#dc172a"}],"isEnabled":true}],"chartSettings":{"seriesOverrides":[],"gapPolicy":"gap","legend":{"hidden":true},"leftYAxisSettings":{"label":""},"fieldMapping":{"timestamp":"timeframe","leftAxisValues":["lsm_segment_size"],"leftAxisDimensions":[]},"hiddenLegendFields":[]},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","colorThresholdTarget":"value"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}},"histogram":{"dataMappings":[{"valueAxis":"interval","rangeAxis":""}]},"honeycomb":{"shape":"square"}}},"13":{"type":"markdown","title":"","content":"## Estimated Sizes LSM Stores"},"15":{"type":"markdown","title":"","content":"TODO: Inverted Index\n\nLine 704 of: `https://github.com/weaviate/weaviate/blob/main/tools/dev/grafana/dashboards/lsm.json`\n\n```\nsum(lsm_segment_size{strategy=\\\"mapcollection\\\"}) + ignoring(strategy) sum(lsm_segment_size{strategy=\\\"setcollection\\\"})\n```"}},"layouts":{"0":{"x":0,"y":0,"w":9,"h":7},"1":{"x":9,"y":4,"w":8,"h":4},"2":{"x":9,"y":0,"w":8,"h":4},"3":{"x":9,"y":8,"w":8,"h":4},"4":{"x":0,"y":7,"w":9,"h":5},"5":{"x":0,"y":16,"w":8,"h":4},"6":{"x":8,"y":12,"w":13,"h":4},"7":{"x":0,"y":12,"w":8,"h":4},"8":{"x":0,"y":21,"w":7,"h":4},"9":{"x":7,"y":21,"w":6,"h":4},"10":{"x":0,"y":20,"w":24,"h":1},"11":{"x":13,"y":21,"w":6,"h":4},"12":{"x":0,"y":26,"w":7,"h":7},"13":{"x":0,"y":25,"w":24,"h":1},"15":{"x":7,"y":26,"w":12,"h":4}}}